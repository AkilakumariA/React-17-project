{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nconst api = process.env.REACT_APP_UNSPLASH_API;\nconst secret = process.env.REACT_APP_UNSPLASH_KEY;\nexport default function useFetchImage(page, searchTerm) {\n  _s();\n\n  const [Images, setImages] = useState([]);\n  const [errors, setErrors] = useState([]);\n  const [isLoading, setisLoading] = useState(false);\n\n  function fetch() {\n    const url = searchTerm === null ? 'photos?' : `search/photos?query=${searchTerm}`;\n    axios.get(`${api}/${url}client_id=${secret}&page=${page}`).then(res => {\n      setisLoading(false);\n    }).catch(e => {\n      setErrors([\"Unable to fetch images\"]);\n      setisLoading(false);\n    });\n  }\n\n  function fetchSearch() {\n    if (page > 1) {\n      setImages([...Image, ...res.data.results]);\n    } else {\n      setImages([...res.data.results]);\n    }\n  }\n\n  function fetchRandom() {\n    axios.get(`${api}/photos?client_id=${secret}&page=${page}`).then(res => {\n      setImages([...Images, ...res.data]);\n      setisLoading(false);\n    }).catch(e => {\n      setErrors([\"Unable to fetch images\"]);\n      setisLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    setisLoading(true); // const url = searchTerm === null ? 'photos' : 'search/photos';\n    // axios.get(`${api}/${url}?client_id=${secret}&page=${page}&query=${searchTerm}`)\n\n    if (searchTerm !== null) {\n      fetchSearch();\n    } else {\n      fetchRandom();\n    }\n  }, [page]);\n  useEffect(() => {\n    if (searchTerm === null) return;\n    fetchSearch();\n  }, [searchTerm]);\n  return [Images, setImages, errors, isLoading];\n}\n\n_s(useFetchImage, \"n09J+lNUtfuJNjaWci16db39FNQ=\");","map":{"version":3,"sources":["D:/React/react-app-exe3/src/utils/hooks/useFetchImage.js"],"names":["axios","React","useEffect","useState","api","process","env","REACT_APP_UNSPLASH_API","secret","REACT_APP_UNSPLASH_KEY","useFetchImage","page","searchTerm","Images","setImages","errors","setErrors","isLoading","setisLoading","fetch","url","get","then","res","catch","e","fetchSearch","Image","data","results","fetchRandom"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,sBAAxB;AACA,MAAMC,MAAM,GAAGH,OAAO,CAACC,GAAR,CAAYG,sBAA3B;AACA,eAAe,SAASC,aAAT,CAAuBC,IAAvB,EAA6BC,UAA7B,EAAyC;AAAA;;AACpD,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;;AACA,WAASgB,KAAT,GAAiB;AACb,UAAMC,GAAG,GAAGR,UAAU,KAAK,IAAf,GAAsB,SAAtB,GAAmC,uBAAsBA,UAAW,EAAhF;AACAZ,IAAAA,KAAK,CAACqB,GAAN,CAAW,GAAEjB,GAAI,IAAGgB,GAAI,aAAYZ,MAAO,SAAQG,IAAK,EAAxD,EAA2DW,IAA3D,CAAgEC,GAAG,IAAI;AAEnEL,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAHD,EAGGM,KAHH,CAGUC,CAAD,IAAO;AACZT,MAAAA,SAAS,CAAC,CAAC,wBAAD,CAAD,CAAT;AACAE,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAND;AAOH;;AACD,WAASQ,WAAT,GAAuB;AACnB,QAAIf,IAAI,GAAG,CAAX,EAAc;AACVG,MAAAA,SAAS,CAAC,CAAC,GAAGa,KAAJ,EAAW,GAAGJ,GAAG,CAACK,IAAJ,CAASC,OAAvB,CAAD,CAAT;AACH,KAFD,MAEO;AACHf,MAAAA,SAAS,CAAC,CAAC,GAAGS,GAAG,CAACK,IAAJ,CAASC,OAAb,CAAD,CAAT;AACH;AACJ;;AACD,WAASC,WAAT,GAAuB;AACnB9B,IAAAA,KAAK,CAACqB,GAAN,CAAW,GAAEjB,GAAI,qBAAoBI,MAAO,SAAQG,IAAK,EAAzD,EAA4DW,IAA5D,CAAiEC,GAAG,IAAI;AACpET,MAAAA,SAAS,CAAC,CAAC,GAAGD,MAAJ,EAAY,GAAGU,GAAG,CAACK,IAAnB,CAAD,CAAT;AACAV,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAHD,EAGGM,KAHH,CAGUC,CAAD,IAAO;AACZT,MAAAA,SAAS,CAAC,CAAC,wBAAD,CAAD,CAAT;AACAE,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAND;AAOH;;AAEDhB,EAAAA,SAAS,CAAC,MAAM;AACZgB,IAAAA,YAAY,CAAC,IAAD,CAAZ,CADY,CAGZ;AACA;;AACA,QAAIN,UAAU,KAAK,IAAnB,EAAyB;AACrBc,MAAAA,WAAW;AACd,KAFD,MAEO;AACHI,MAAAA,WAAW;AACd;AACJ,GAVQ,EAUN,CAACnB,IAAD,CAVM,CAAT;AAWAT,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIU,UAAU,KAAK,IAAnB,EAAyB;AACzBc,IAAAA,WAAW;AACd,GAHQ,EAGN,CAACd,UAAD,CAHM,CAAT;AAKA,SAAO,CAACC,MAAD,EAASC,SAAT,EAAoBC,MAApB,EAA4BE,SAA5B,CAAP;AACH;;GAhDuBP,a","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst api = process.env.REACT_APP_UNSPLASH_API;\r\nconst secret = process.env.REACT_APP_UNSPLASH_KEY;\r\nexport default function useFetchImage(page, searchTerm) {\r\n    const [Images, setImages] = useState([]);\r\n    const [errors, setErrors] = useState([]);\r\n    const [isLoading, setisLoading] = useState(false);\r\n    function fetch() {\r\n        const url = searchTerm === null ? 'photos?' : `search/photos?query=${searchTerm}`\r\n        axios.get(`${api}/${url}client_id=${secret}&page=${page}`).then(res => {\r\n\r\n            setisLoading(false);\r\n        }).catch((e) => {\r\n            setErrors([\"Unable to fetch images\"]);\r\n            setisLoading(false);\r\n        });\r\n    }\r\n    function fetchSearch() {\r\n        if (page > 1) {\r\n            setImages([...Image, ...res.data.results]);\r\n        } else {\r\n            setImages([...res.data.results]);\r\n        }\r\n    }\r\n    function fetchRandom() {\r\n        axios.get(`${api}/photos?client_id=${secret}&page=${page}`).then(res => {\r\n            setImages([...Images, ...res.data]);\r\n            setisLoading(false);\r\n        }).catch((e) => {\r\n            setErrors([\"Unable to fetch images\"]);\r\n            setisLoading(false);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        setisLoading(true);\r\n\r\n        // const url = searchTerm === null ? 'photos' : 'search/photos';\r\n        // axios.get(`${api}/${url}?client_id=${secret}&page=${page}&query=${searchTerm}`)\r\n        if (searchTerm !== null) {\r\n            fetchSearch();\r\n        } else {\r\n            fetchRandom();\r\n        }\r\n    }, [page]);\r\n    useEffect(() => {\r\n        if (searchTerm === null) return;\r\n        fetchSearch();\r\n    }, [searchTerm])\r\n\r\n    return [Images, setImages, errors, isLoading];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}